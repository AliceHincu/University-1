#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/stat.h>
void makeFifoIfNotExist(char* fifoName);
void handler(int sig);
int main(int argc, char** argv) {
	signal(SIGINT, handler);
	makeFifoIfNotExist(myfifo);
	return 0;
}


void handler(int sig) {
	printf("\nSIGINT received; removing fifo.\n");
	if (unlink(myfifo) < 0) {
		perror("Unlink failed");
		exit(1);
	}
	exit(0);
}
void makeFifoIfNotExist(char* fifoName) {
	struct stat status;
	if (stat(fifoName, &status) < 0) {
		if (errno != ENOENT) {
			perror("Error on stat");
			exit(1);
		}
	} else {
		if (S_ISFIFO(stats.st_mode)) {
			if (unlink(fifoName) < 0) {
				perror("Unlink failed");
				exit(1);
			}
		}else {
			printf("Another file with the same name exists.\n");
			exit(1);
		}
	}
	if (mkfifo(fifoName, 0600) < 0) {
		perror("Error on create fifo");
		exit(1);
	}
}

